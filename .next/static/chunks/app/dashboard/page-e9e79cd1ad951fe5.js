(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{285:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var r=s(5155);s(2115);var a=s(9708),n=s(2085),i=s(9434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:s,size:n,asChild:d=!1,...c}=e,o=d?a.Slot:"button";return(0,r.jsx)(o,{"data-slot":"button",className:(0,i.cn)(l({variant:s,size:n,className:t})),...c})}},6126:(e,t,s)=>{"use strict";s.d(t,{E:()=>d});var r=s(5155);s(2115);var a=s(9708),n=s(2085),i=s(9434);let l=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:s,asChild:n=!1,...d}=e,c=n?a.Slot:"span";return(0,r.jsx)(c,{"data-slot":"badge",className:(0,i.cn)(l({variant:s}),t),...d})}},6695:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>i,wL:()=>o});var r=s(5155);s(2115);var a=s(9434);function n(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function i(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function l(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...s})}function d(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...s})}function c(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...s})}function o(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",t),...s})}},8329:(e,t,s)=>{Promise.resolve().then(s.bind(s,9231))},9231:(e,t,s)=>{"use strict";s.d(t,{DashboardClient:()=>B});var r=s(5155),a=s(6411),n=s(6874),i=s.n(n),l=s(285),d=s(2115),c=s(704),o=s(9434);function u(e){let{className:t,...s}=e;return(0,r.jsx)(c.bL,{"data-slot":"tabs",className:(0,o.cn)("flex flex-col gap-2",t),...s})}function x(e){let{className:t,...s}=e;return(0,r.jsx)(c.B8,{"data-slot":"tabs-list",className:(0,o.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function h(e){let{className:t,...s}=e;return(0,r.jsx)(c.l9,{"data-slot":"tabs-trigger",className:(0,o.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function m(e){let{className:t,...s}=e;return(0,r.jsx)(c.UC,{"data-slot":"tabs-content",className:(0,o.cn)("flex-1 outline-none",t),...s})}var f=s(6695),p=s(2337),v=s(1154),g=s(4477);let b=(0,g.createServerReference)("40de2ee6a6928ff1213d67c1c8523798aa4e0abcca",g.callServer,void 0,g.findSourceMapURL,"generateUploadUrl");var j=s(6671);let y=(0,g.createServerReference)("40c7a0e4b8d81da0e07c287def74667cf38b7ec046",g.callServer,void 0,g.findSourceMapURL,"processVideo");function w(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:(0,o.cn)("w-full caption-bottom text-sm",t),...s})})}function N(e){let{className:t,...s}=e;return(0,r.jsx)("thead",{"data-slot":"table-header",className:(0,o.cn)("[&_tr]:border-b",t),...s})}function k(e){let{className:t,...s}=e;return(0,r.jsx)("tbody",{"data-slot":"table-body",className:(0,o.cn)("[&_tr:last-child]:border-0",t),...s})}function C(e){let{className:t,...s}=e;return(0,r.jsx)("tr",{"data-slot":"table-row",className:(0,o.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function S(e){let{className:t,...s}=e;return(0,r.jsx)("th",{"data-slot":"table-head",className:(0,o.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function U(e){let{className:t,...s}=e;return(0,r.jsx)("td",{"data-slot":"table-cell",className:(0,o.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}var _=s(6126),R=s(5695),E=s(5690),z=s(1788);let P=(0,g.createServerReference)("4022e44013e83307a8b530b883fb87c31ea9076ba7",g.callServer,void 0,g.findSourceMapURL,"getClipPlayUrl");function A(e){let{clip:t}=e,[s,a]=(0,d.useState)(null),[n,i]=(0,d.useState)(!0);return(0,d.useEffect)(()=>{!async function(){try{let e=await P(t.id);e.succes&&e.url?a(e.url):e.error&&console.error("Failed to get play url: "+e.error)}catch(e){}finally{i(!1)}}()},[t.id]),(0,r.jsxs)("div",{className:"flex max-w-52 flex-col gap-2",children:[(0,r.jsx)("div",{className:"bg-muted",children:n?(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(v.A,{className:"text-muted-foreground h-8 w-8 animate-spin"})}):s?(0,r.jsx)("video",{src:s,controls:!0,preload:"metadata",className:"h-full w-full rounded-md object-cover"}):(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(E.A,{className:"text-muted-foreground h-10 w-10 opacity-50"})})}),(0,r.jsx)("div",{className:"flex flex-col gap-2",children:(0,r.jsxs)(l.$,{onClick:()=>{if(s){let e=document.createElement("a");e.href=s,e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},variant:"outline",size:"sm",children:[(0,r.jsx)(z.A,{className:"mr-1.5 h-4 w-4"}),"Download"]})})]})}function F(e){let{clips:t}=e;return 0===t.length?(0,r.jsx)("p",{className:"text-muted-foreground p-4 text-center",children:"No clips generated yet."}):(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3 lg:grid-cols-4",children:t.map(e=>(0,r.jsx)(A,{clip:e},e.id))})}function B(e){let{uploadedFiles:t,clips:s}=e,[n,c]=(0,d.useState)([]),[o,g]=(0,d.useState)(!1),[E,z]=(0,d.useState)(!1),P=(0,R.useRouter)(),A=async()=>{z(!0),P.refresh(),setTimeout(()=>z(!1),600)},B=async()=>{if(0===n.length)return;let e=n[0];g(!0);try{let{success:t,signedUrl:s,uploadedFileId:r}=await b({filename:e.name,contentType:e.type});if(!t)throw Error("Failed to get upload URL");let a=await fetch(s,{method:"PUT",body:e,headers:{"Content-Type":e.type}});if(!a.ok)throw Error("Upload filed with status: ".concat(a.status));await y(r),c([]),j.oR.success("Video uploaded successfully",{description:"Your video has been scheduled for processing. Check the status below.",duration:5e3})}catch(e){j.oR.error("Upload failed",{description:"There was a problem uploading your video. Please try again."})}finally{g(!1)}};return(0,r.jsxs)("div",{className:"mx-auto flex max-w-5xl flex-col space-y-6 px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Podcast Clipper"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Upload your podcast and get AI-generated clips instantly"})]}),(0,r.jsx)(i(),{href:"/dashboard/billing",children:(0,r.jsx)(l.$,{children:"Buy Credits"})})]}),(0,r.jsxs)(u,{defaultValue:"upload",children:[(0,r.jsxs)(x,{children:[(0,r.jsx)(h,{value:"upload",children:"Upload"}),(0,r.jsx)(h,{value:"my-clips",children:"My Clips"})]}),(0,r.jsx)(m,{value:"upload",children:(0,r.jsxs)(f.Zp,{children:[(0,r.jsxs)(f.aR,{children:[(0,r.jsx)(f.ZB,{children:"Upload Podcast"}),(0,r.jsx)(f.BT,{children:"Upload your audio or video file to generate clips"})]}),(0,r.jsxs)(f.Wu,{children:[(0,r.jsx)(a.A,{onDrop:e=>{c(e)},accept:{"video/mp4":[".mp4"]},maxSize:524288e3,disabled:o,maxFiles:1,children:e=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 rounded-lg p-10 text-center",children:[(0,r.jsx)(p.A,{className:"text-muted-foreground h-12 w-12"}),(0,r.jsx)("p",{className:"font-medium",children:"Drag and drop your file"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:"or click to browse (MP4 up to 500MB)"}),(0,r.jsx)(l.$,{className:"cursor-pointer",variant:"default",size:"sm",disabled:o,children:"Select File"})]})})}),(0,r.jsxs)("div",{className:"mt-2 flex items-start justify-between",children:[(0,r.jsx)("div",{children:n.length>0&&(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsx)("p",{className:"font-medium",children:"Selected file:"}),n.map(e=>(0,r.jsx)("p",{className:"text-muted-foreground",children:e.name},e.name))]})}),(0,r.jsx)(l.$,{disabled:0===n.length||o,onClick:B,children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):"Upload and Generate Clips"})]}),t.length>0&&(0,r.jsxs)("div",{className:"pt-6",children:[(0,r.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-md mb-2 font-medium",children:"Queue status"}),(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:A,disabled:E,children:[E&&(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Refresh"]})]}),(0,r.jsx)("div",{className:"max-h-[300px] overflow-auto rounded-md border",children:(0,r.jsxs)(w,{children:[(0,r.jsx)(N,{children:(0,r.jsxs)(C,{children:[(0,r.jsx)(S,{children:"File"}),(0,r.jsx)(S,{children:"Uploaded"}),(0,r.jsx)(S,{children:"Status"}),(0,r.jsx)(S,{children:"Clips created"})]})}),(0,r.jsx)(k,{children:t.map(e=>(0,r.jsxs)(C,{children:[(0,r.jsx)(U,{className:"max-w-xs truncate font-medium",children:e.filename}),(0,r.jsx)(U,{className:"text-muted-foreground text-sm",children:new Date(e.createdAt).toLocaleDateString()}),(0,r.jsxs)(U,{children:["queued"===e.status&&(0,r.jsx)(_.E,{variant:"outline",children:"Queued"}),"processing"===e.status&&(0,r.jsx)(_.E,{variant:"outline",children:"Processing"}),"processed"===e.status&&(0,r.jsx)(_.E,{variant:"outline",children:"Processed"}),"no credits"===e.status&&(0,r.jsx)(_.E,{variant:"destructive",children:"No credits"}),"failed"===e.status&&(0,r.jsx)(_.E,{variant:"destructive",children:"Failed"})]}),(0,r.jsx)(U,{children:e.clipsCount>0?(0,r.jsxs)("span",{children:[e.clipsCount," clip",1!==e.clipsCount?"s":""]}):(0,r.jsx)("span",{className:"text-muted-foreground",children:"No clips yet"})})]},e.id))})]})})]})]})]})}),(0,r.jsx)(m,{value:"my-clips",children:(0,r.jsxs)(f.Zp,{children:[(0,r.jsxs)(f.aR,{children:[(0,r.jsx)(f.ZB,{children:"My Clips"}),(0,r.jsx)(f.BT,{children:"View and manage your generated clips here. Processing may take a few minuntes."})]}),(0,r.jsx)(f.Wu,{children:(0,r.jsx)(F,{clips:s})})]})})]})]})}},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(2596),a=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[37,3,604,797,441,684,358],()=>t(8329)),_N_E=e.O()}]);